<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>How to create a hillshade using QGIS</title>
  <meta name="description" content="The Why (if you just want the How To, skip down a bit)I lived in Bogotá, Colombia, for 4 years. One of the things I miss most about it is living right next t...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://tolomaps.github.io/tumblr/2015/04/15/hillshade-in-qgis.html">
  <link rel="alternate" type="application/rss+xml" title="Robin Tolochko" href="http://tolomaps.github.io/feed.xml">
</head>


  <body>

    <!-- <header class="site-header"> -->

  <!-- <div class="wrapper"> -->
    <nav class="navbar navbar-default navbar-fixed-top main-navbar site-nav">
      <div class="container">
        <div class="navbar-header">
          <a href="#"></a>
          <a href="#" class="menu-icon">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
              <span class="sr-only">Toggle navigation</span>
              <span class="menu">Menu</span>
            </button>
          </a>
          <a class="site-title" href="/">Robin Tolochko</a>
        </div>

        <div class="collapse navbar-collapse trigger" id="navbar">
          <ul class="nav navbar-nav">
            <li><a href="/about" class="page-link">About</a></li>
            <li><a href="/blog" class="page-link">Blog</a></li>
          </ul>
        </div>
      </div>
    </nav>
  <!-- </div> -->

<!-- </header> -->


    <div>
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">How to create a hillshade using QGIS</h1>
    <p class="post-meta"><time datetime="2015-04-15T01:19:02-05:00" itemprop="datePublished">Apr 15, 2015</time></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p><b>The Why (if you just want the How To, skip down a bit)</b></p><p>I lived in Bogotá, Colombia, for 4 years. One of the things I miss most about it is living right next to the green mountains lining the eastern side of the city. We could climb up on the roof of our building and get a clear view of Monserrate. <br/></p><img src="http://40.media.tumblr.com/0535f12729c36a4f9c4b00de9fe1dd01/tumblr_inline_nmttq9HrGg1sr0q4f_540.jpg" alt=""/><p>Colombia is a country of mountains and rivers. I suppose you could say that about many places, but when I think of my travels there, I think of bus rides along winding mountain roads and hiking over a mountain pass at 4,650 meters. I think of taking off my boots to cross cold, glacier-fed rivers and of basking in the sun while riding down an inner tube on its way to the sea. </p><figure data-orig-width="1024" data-orig-height="768" class="tmblr-full"><img src="http://36.media.tumblr.com/74007902b6236236ec8edca3fd6fe85a/tumblr_inline_nmtv6wJhO11sr0q4f_540.jpg" alt="image" data-orig-width="1024" data-orig-height="768"/></figure><figure data-orig-width="1024" data-orig-height="768" class="tmblr-full"><img src="http://41.media.tumblr.com/55c2aa05e5f875dd683cd8d4af13c184/tumblr_inline_nmtv6sTEYz1sr0q4f_540.jpg" alt="image" data-orig-width="1024" data-orig-height="768"/></figure><figure data-orig-width="1024" data-orig-height="768" class="tmblr-full"><img src="http://40.media.tumblr.com/75231a104f4b981800b0dee14b7ba6b2/tumblr_inline_nmtv7169EC1sr0q4f_540.jpg" alt="image" data-orig-width="1024" data-orig-height="768"/></figure><figure data-orig-width="810" data-orig-height="1200" class="tmblr-full"><img src="http://41.media.tumblr.com/f0c29d9ff99e0c0d5ece9aec6eaecc93/tumblr_inline_nmtv6ppTMk1sr0q4f_540.jpg" alt="image" data-orig-width="810" data-orig-height="1200"/></figure><p>As a tribute to a place that was my adopted home for many years, I am making a shaded relief map of Colombia, emphasizing its mountains and its rivers. </p><p>I’ve never made a shaded relief map. I was intimidated &ndash; they seemed hard, out of my reach. But as a cartographer, I felt that I needed to have that tool in my toolbox. I typically lean towards the data-driven side of mapmaking, but this time I wanted to make something beautiful to hang on my wall. <br/></p><p>(Spoiler alert: It’s not that hard to make a shaded relief. At least, it’s not that hard to do a decent one. To do a <a href="http://www.shadedrelief.com/">Tom Patterson</a> or <a href="https://somethingaboutmaps.wordpress.com/2014/01/01/blender-tutorial/">Daniel Huffman</a> style one, you’ve come to the wrong place.)</p><p><b>The How To: Creating a hillshade (aka shaded relief) using QGIS</b></p><p>I wanted to try QGIS because&hellip; well, because it’s free, open-source, and works on my Mac. <br/></p><p>First, I started by downloading the DEMs. DEMs are digital elevation models - raster images that contain information about elevation for each pixel. I got the DEMs from <a href="http://www.viewfinderpanoramas.org/dem3.html">Viewfinder Panoramas</a>, a fabulous resource. I love whoever put it together. Thank you.</p><figure data-orig-width="316" data-orig-height="320" class="tmblr-full"><img src="http://41.media.tumblr.com/f9c59aa6e501c28cda0ea1222502c0da/tumblr_inline_nmtvkoUf411sr0q4f_540.png" alt="image" data-orig-width="316" data-orig-height="320"/></figure><p>I downloaded the DEMs at a scale of 3″ arc second resolution. They came in large zip files, each one with several .hgt files inside them. I have no idea what this file type is, but you can easily load it into QGIS using this handy button. </p><figure data-orig-width="68" data-orig-height="74"><img src="http://41.media.tumblr.com/2526c57cbd6896dd66cbe57f5ecb5102/tumblr_inline_nmtwamTZRj1sr0q4f_540.png" alt="image" data-orig-width="68" data-orig-height="74"/></figure><p>There were a ton of these. Once they were all loaded in, it looked something like this:</p><figure data-orig-width="2560" data-orig-height="1584" class="tmblr-full"><img src="http://40.media.tumblr.com/fc0da3d7e5907b763a6f5ac242a7b74a/tumblr_inline_nmtwc52v7O1sr0q4f_540.png" alt="image" data-orig-width="2560" data-orig-height="1584"/></figure><p>I brought in a country shapefile from <a href="http://www.naturalearthdata.com/downloads/110m-cultural-vectors/">Natural Earth</a> to make sure that I got all of the DEMs to cover the full extent of Colombia. Then, I merged all of the separate DEMs into one large one by selecting Raster &gt; Miscellaneous &gt; Merge. </p><figure data-orig-width="2552" data-orig-height="1586" class="tmblr-full"><img src="http://36.media.tumblr.com/4f8af0c775fe150e351e5720d9d63200/tumblr_inline_nmtwfo0asZ1sr0q4f_540.png" alt="image" data-orig-width="2552" data-orig-height="1586"/></figure><p>For bathymetry (it’s like terrain, but for the ocean), I decided to use the <a href="http://www.naturalearthdata.com/downloads/10m-physical-vectors/">Natural Earth bathymetry</a> vector polygons. They don’t show as much detail, but they’re fine for now. I can always decide later that I want more detailed bathymetry and go grab data for it if I’m feeling ambitious.</p><figure data-orig-width="2560" data-orig-height="1590" class="tmblr-full"><img src="http://41.media.tumblr.com/35dd94fa19eb1cd8b86a314adeedbc28/tumblr_inline_nmtwkiqN0b1sr0q4f_540.png" alt="image" data-orig-width="2560" data-orig-height="1590"/></figure><p>So, now I have a raster image with the elevation data, but it doesn’t look like terrain yet. I was able to figure it out with the help of <a href="https://niketnarang.wordpress.com/2012/06/11/creating-a-hill-shade-from-dem-using-qgis/">this blog post</a>. Go to Raster &gt; Analysis &gt; DEM (Terrain Models).</p><figure data-orig-width="2560" data-orig-height="1600" class="tmblr-full"><img src="http://41.media.tumblr.com/5a0ed676cd725d6289c0cbb7473d5b8e/tumblr_inline_nmtww3y8AQ1sr0q4f_540.png" alt="image" data-orig-width="2560" data-orig-height="1600"/></figure><p>That will bring you to this lovely dialog box:</p><figure data-orig-width="2560" data-orig-height="1550" class="tmblr-full"><img src="http://40.media.tumblr.com/1d8be5ee720d7edd93b7e27aacff924e/tumblr_inline_nmtybpM55L1sr0q4f_540.png" alt="image" data-orig-width="2560" data-orig-height="1550"/></figure><p>Here’s what all of this means:</p><ol><li><i>Input file (DEM raster)</i>: Select the composite DEM.</li><li><i>Output file</i>: Select a name and location to save your new hillshade file.</li><li><i>Mode</i>: Hillshade is the default, leave it at that.</li><li><i>Mode Options</i>: This is where the fun happens. </li><ol><li><i>Z factor (vertical exaggeration)</i>: This is pretty self-explanatory. The bigger the number, the more exaggerated the terrain looks.</li><li><i>Scale (ratio of vert. units to horiz.)</i>: This is where <a href="https://niketnarang.wordpress.com/2012/06/11/creating-a-hill-shade-from-dem-using-qgis/">this blog post</a> really came in handy. This is the scale of vertical units (i.e., elevation data) to horizontal units (i.e., the distance across the Earth’s surface). According to the GDAL documentation: “For LatLong projections near the equator, where units of latitude and units of 
  longitude are similar, elevation (z) units can be converted to be compatible
  by using scale=370400 (if elevation is in feet) or scale=111120 (if elevation is in meters).” I used 111120 for my scale.</li><li><i>Azimuth of the light</i>: This is the direction that the “light source” is coming from that is “shining” on your elevation data to make it look like terrain. If you make it 0, that means that the light is coming directly from the north. If it’s 180, that means it’s coming from the south (you can set the number anywhere between 0 and 359, like the degrees of a circle, with the circle starting at due north). The default setting is 315.</li><li><i>Altitude of the light</i>: This is the angle of the light source from the horizon. So if it is 0, then the light source is on the horizon, if it is 90, the light source is directly overhead. The default setting is 45.</li></ol></ol><p>The input boxes are just an interface that writes a GDAL script for you to create the hillshade. This means you can also edit the GDAL script directly in the input box at the bottom of the DEM dialog. QGIS is pretty great in that way - it gives you an interface, but if you want to write the script yourself, you can. </p><figure data-orig-width="1197" data-orig-height="613" class="tmblr-full"><img src="http://41.media.tumblr.com/623d924bb53048088764d7aed5b113ce/tumblr_inline_nmu0p0hSaP1sr0q4f_540.png" alt="image" data-orig-width="1197" data-orig-height="613"/></figure><p>I should note that the light source typically comes from the top-left, which is why the azimuth is set to 315 by default. This is because, for whatever reason, if the light source comes from the bottom-right, we (mis)interpret the mountains as canyons. It looks pretty crazy.</p><figure data-orig-width="452" data-orig-height="598" class="tmblr-full"><img src="http://40.media.tumblr.com/d07ccff48740e748b048131136478541/tumblr_inline_nmu1d0QhHn1sr0q4f_540.png" alt="image" data-orig-width="452" data-orig-height="598"/></figure><p>The output will be a TIFF file that you can open up in Photoshop or your program of choice to do some more processing on to prettify it. I’m planning future posts to talk about what I’ll do in Photoshop, plus how to include additional vector layers like rivers and cities. <br/></p><p>A note about file management: you should come up with a naming system that works for you and stick with it. I was playing around with different scale, azimuth, and altitude settings and needed a way to remember which settings I had used for each file, rather than just making files that said hillshade1.tif, hillshade2.tif, etc. My personal system was to write the settings into the filename itself, something like HillshadeScale6Al45Az315.tif. <br/></p><p><i>Thanks to Daniel Huffman and Tanya Buckingham for walking me through the different things I had to think through. I’m writing this down in the hopes that the knowledge you’ve given me can be passed along to others!</i></p>

  </div>

</article>

    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Robin Tolochko</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>Robin Tolochko</li>
          <li><a href="mailto:tolomaps@gmail.com">tolomaps@gmail.com</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/tolomaps"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">tolomaps</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/tolomaps"><span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">tolomaps</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>

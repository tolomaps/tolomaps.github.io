---
layout: post
title: Once again, OpenStreetMap wins in data accuracy
date: '2015-04-30T01:03:48-05:00'
tags:
- openstreetmap
- qgis
- colombia
- rivers
- overpass turbo
- waterway
- tutorial
- accuracy
- maps
tumblr_url: http://tolomaps.tumblr.com/post/117750908598/once-again-openstreetmap-wins-in-data-accuracy
---
<p>The past few days, I’ve heard a lot about the amazing work that the <a href="http://hot.openstreetmap.org/updates">Humantarian OpenStreetMap Team</a> is doing to fill out OSM data in Nepal following the earthquake there. I’ve participated a bit myself. If you’re interested in helping out with that, <a href="http://maptime.io/blog/2015/04/27/help-HOT/">this is a good place to start</a>.</p><p>But this post isn’t about that. It’s about the map of Colombia that I’m making (see previous post about <a href="http://tolomaps.tumblr.com/post/116446854838/hillshade-in-qgis">making a hillshade in QGIS</a>). </p><p>I want to include rivers on my map and was trying to figure out the best data source for the rivers. The thing about including rivers on terrain maps is that they have to align really well with the terrain, or it looks funny. Below, the blue line is from <a href="http://www.naturalearthdata.com/downloads/">Natural Earth</a>, which is often my initial go-to source for data. The yellow line is from <a href="http://www.ngdc.noaa.gov/mgg/shorelines/gshhs.html">NOAA’</a>s Global Self-consistent, Hierarchical, High-resolution Geography Database. You can see how “high-resolution” that yellow line is.</p><figure data-orig-width="1982" data-orig-height="1280" class="tmblr-full"><img src="http://41.media.tumblr.com/fbe47c263700a3410a5045b9a1af9675/tumblr_inline_nnlr3wp63l1sr0q4f_540.png" alt="image" data-orig-width="1982" data-orig-height="1280"/></figure><p>But clearly these didn’t really fit the bill. I can see from the terrain where the river runs, and neither of those lines come even close. That’s when I turned to OpenStreetMap. Note the green line below.</p><figure data-orig-width="1948" data-orig-height="1260" class="tmblr-full"><img src="http://36.media.tumblr.com/3d4233c560551472da2382d512eee9e6/tumblr_inline_nnlqurRBq91sr0q4f_540.png" alt="image" data-orig-width="1948" data-orig-height="1260"/></figure><p>It fits perfectly with the terrain. There are some areas of the country that will need to be cleaned up - the OpenStreetMap data includes too many rivers for a country-level map - but I’d rather start with more data than I need and work my way down.</p><p>So, you may be wondering - how did I actually download all of the rivers for Colombia? There’s an amazing tool called <a href="http://overpass-turbo.eu/">Overpass Turbo</a>, which allows you to query specific OpenStreetMap data. So, for example, I could say, “I want to get all the rivers in Colombia!” and it’ll let me do that. It turns out that if you don’t really feel like learning how to do the querying within the API itself, there’s a plugin for QGIS that makes it even easier, called <a href="https://plugins.qgis.org/plugins/QuickOSM/">QuickOSM</a>. </p><p>To get it yourself, go to Plugins &gt; Manage and Install Plugins. In the search box, search for QuickOSM. Select QuickOSM and then press the Install plugin button. </p><figure data-orig-width="2560" data-orig-height="1550" class="tmblr-full"><img src="http://41.media.tumblr.com/0e6b64abfc5f8cfb08dd1b7463ece20a/tumblr_inline_nnlrxcYbtD1sr0q4f_540.png" alt="image" data-orig-width="2560" data-orig-height="1550"/></figure><p>To access the plugin, go to Web &gt; Quick OSM &gt; Quick OSM.</p><figure data-orig-width="2556" data-orig-height="1590" class="tmblr-full"><img src="http://36.media.tumblr.com/8ed51e20b42d8e307ad215e1f7248070/tumblr_inline_nnls27iasC1sr0q4f_540.png" alt="image" data-orig-width="2556" data-orig-height="1590"/></figure><p>Then you can define the type of data that you want to get. In my example, I want the key = waterway and the value = river. I opt to just download the rivers in the extent of the map canvas and make sure that I have all of Colombia showing. Then just hit Run query. If you don’t know anything about key/value pairs, click on the “Help with key/value” button, and it will take you to <a href="http://wiki.openstreetmap.org/wiki/Map_Features">this page</a>, which explains how different features are categorized in OSM. Or send me a shoutout on Twitter and I’ll do what I can to help you.</p><figure data-orig-width="1510" data-orig-height="1226" class="tmblr-full"><img src="http://36.media.tumblr.com/e04ab00e002973e6882b6edaf9189163/tumblr_inline_nnls77y7FU1sr0q4f_540.png" alt="image" data-orig-width="1510" data-orig-height="1226"/></figure><p>Depending on the size of your query, the query may timeout - basically, it was taking too long to try and get that data from OSM. In this case, you can try increasing the amount of time that the plugin spends on the query. To do this, click the Show query button, which will take you to the Query tab of the plugin. </p><figure data-orig-width="1508" data-orig-height="1224" class="tmblr-full"><img src="http://40.media.tumblr.com/e4bc507576756b8833c2df19abe101a1/tumblr_inline_nnlse3Ncj01sr0q4f_540.png" alt="image" data-orig-width="1508" data-orig-height="1224"/></figure><p>Notice that in the top line, it says timeout= &ldquo;25″. This is the number of seconds that the plugin will spend trying to run your query. I just typed in 60 instead of 25, then hit Run query, and that was enough time to get the data I needed. Yippee!</p><p><i>Addendum:<br/></i>As I’m working my way through and cleaning up the rivers in Illustrator, I should point out that there are some areas where the Natural Earth area is better because the OSM data is incomplete. In general, for the case of Colombia, I have found that the OSM rivers are more detailed, but often disjointed. So my final map will be a combination of the Natural Earth and the OSM data, depending on the particular area.</p><figure data-orig-width="1080" data-orig-height="879" class="tmblr-full"><img src="http://40.media.tumblr.com/1c7b71943fcb9baab9622966bb7c29fb/tumblr_inline_nnlwvmYXfs1sr0q4f_540.png" data-orig-width="1080" data-orig-height="879"/></figure>
